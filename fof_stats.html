<!DOCTYPE html>
<html>

<head>
  <title>Forge of Foes 5e Monster Stats Expanded</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 18px;
    }

    #container {
      max-width: 600px;
      margin: auto;
    }

    #statBlock {
      border: 1px solid #ccc;
      padding: 25px;
      margin-top: 15px;
      text-align: left;
      line-height: 1.6;
    }

    #crTitle {
      font-size: 32px;
      margin-bottom: 15px;
    }

    select,
    input {
      font-size: 18px;
      padding: 2px;
      margin-bottom: 5px;
      width: 50%;
    }

    .license {
      font-size: 12px
    }

    h1 {
      text-align: center
    }

    table {
      border-spacing: 0px;
    }

    td,
    th {
      padding: 5px 20px;
      border: 1px solid #ccc;
    }
  </style>
</head>

<body>
  <div id="container">
    <h1><em><a
          href="https://shop.slyflourish.com/collections/the-lazy-dungeon-master-series/products/forge-of-foes">Forge of
          Foes</a></em> 5e Monster Stats</h1>
    <div>
      <label for="name">Name:</label>
      <input id="name" />
    </div>
    <div>
      <label for="crSelect">Select CR:</label>
      <select id="crSelect">
        <!-- CR Options -->
      </select>
    </div>
    <div>
      <label for="typeSelect">Select Type:</label>
      <select id="typeSelect">
        <!-- Type Options -->
      </select>
    </div>
    <div>
      <label for="roleSelect">Select Role:</label>
      <select id="roleSelect">
        <!-- Role Options -->
      </select>
    </div>
    <div>
      <label for="themeSelect">Select Theme:</label>
      <select id="themeSelect">
        <!-- Theme Options -->
      </select>
    </div>
    <button id="submit">Submit</button>

    <div id="statBlock">
      <!-- Stat Block -->
    </div>
    <h3>Monster Features</h3>
    <p>Give any custom monster impactful features and attacks that make sense for their place in the game. When a
      monster feature deals damage, choose a damage type appropriate to the creature's physiology, theme, or story. A
      creature channeling magical power might deal acid, cold, fire, lightning, force, poison, psychic, necrotic,
      radiant, or thunder damage. A creature making use of spines, spikes, or projectiles might deal bludgeoning,
      piercing, or slashing damage.</p>
    <p><strong><em>Damaging Blast.</em></strong> This creature has one or more single-target ranged attacks using the
      attack bonus and damage calculated above, and which deal damage of an appropriate type.</p>
    <p><strong><em>Damage Reflection.</em></strong> Whenever a creature within 5 feet of this creature hits them with a
      melee attack, the attacker takes damage in return of a type appropriate to the creature. The damage dealt is equal
      to half the damage of one of this creature's attacks. If you give a creature this feature, give them one less
      attack than normal.</p>
    <p><strong><em>Misty Step.</em></strong> As a bonus action, this creature can teleport up to 30 feet to an
      unoccupied space they can see.</p>
    <p><strong><em>Knockdown.</em></strong> When this creature hits a target with a melee attack, the target must
      succeed on a Strength saving throw or be knocked prone.</p>
    <p><strong><em>Restraining Grab.</em></strong> When this creature hits a target with a melee attack, the target is
      grappled (escape DC based on this creature's Strength or Dexterity modifier). While grappled, the target is
      restrained.</p>
    <p><strong><em>Damaging Burst.</em></strong> As an action, this creature can create a burst of energy, magic,
      spines, or some other effect in a 10-foot-radius sphere, either around themself or at a point within 120 feet.
      Each creature in that area must make a Dexterity, Constitution, or Wisdom saving throw (your choice, based on the
      type of burst). On a failure, a target takes damage of an appropriate type equal to half this creature's total
      damage per round. On a success, a target takes half as much damage.</p>
    <p><strong><em>Cunning Action</em></strong>. On each of their turns, this creature can use a bonus action to take
      the Dash, Disengage, or Hide action.</p>
    <p><strong><em>Damaging Aura.</em></strong> Each creature who starts their turn within 10 feet of this creature
      takes damage of a type appropriate to the creature. The damage dealt is equal to half the damage of one of this
      creature's attacks. If you give a creature this feature, give them one less attack than normal.</p>
    <p><strong><em>Energy Weapons.</em></strong> The creature's weapon attacks deal extra damage of an appropriate type.
      You can add this damage on top of the creature's regular damage output to give them a combat boost, or you can
      replace some of the creature's normal weapon damage with this energy damage.</p>
    <p><strong><em>Damage Transference.</em></strong> When this creature takes damage, they can transfer half or all of
      that damage (your choice) to a willing creature within 30 or 60 feet of them. This feature is particularly good
      for boss monsters.</p>

    <h2>Conditions</h2>
    <p>Creatures may inflict conditions on attacks. Here's a list of potential conditions. Be careful to ensure such
      conditions don't take away too much agency from the characters or their players. Aim towards fun.</p>

    <h3>Blinded</h3>
    <ul>
      <li>A blinded creature can't see and it automatically fails ability checks that require sight.</li>
      <li>Attack rolls against a blinded creature are made with advantage, and the creature's attack rolls are made with
        disadvantage.</li>
    </ul>
    <h3>Charmed</h3>
    <ul>
      <li>A charmed creature can't take any hostile action against the charmer.</li>
      <li>Ability checks the charmer makes to socially interact with the charmed creature have advantage.</li>
    </ul>
    <h3>Confused</h3>
    <ul>
      <li>A confused creature can't take reactions.</li>
      <li>On its turn a confused creature rolls a d8 to determine what it does.
        <ul>
          <li>On a 1 to 4, a confused creature does nothing. </li>
          <li>On a 5 or 6, a confused creature takes no action or bonus action and uses all its movement to move in a
            randomly determined direction. </li>
          <li>On a 7 or 8, a confused creature makes a melee attack against a randomly determined creature within its
            reach or does nothing if it can't make such an attack.</li>
        </ul>
      </li>
    </ul>

    <h3>Doomed</h3>
    <ul>
      <li>A doomed creature dies at a time determined by the GM, or within 13 (2d12) hours.</li>
      <li>A doomed creature continues to be doomed even after it dies. Magic equivalent to a 7th-level or higher spell
        can remove the doomed condition (such as regenerate cast on a living creature, resurrection, true resurrection,
        or wish).</li>
    </ul>

    <h3>Frightened</h3>
    <ul>
      <li>A frightened creature has disadvantage on ability checks and attack rolls while it is able to see the source
        of its fear.</li>
      <li>A frightened creature can't willingly move closer to the source of its fear.</li>
    </ul>
    <h3>Grappled</h3>
    <ul>
      <li>A grappled creature's Speed becomes 0, and it can't benefit from bonuses to movement speeds.</li>
      <li>If the grappler becomes incapacitated the condition ends.</li>
      <li>If an effect removes the grappled creature from the reach of the grappler or grappling effect the condition
        ends.</li>
    </ul>
    <h3>Incapacitated</h3>
    <ul>
      <li>An incapacitated creature can't take actions, bonus actions, or reactions.</li>
    </ul>
    <h3>Paralyzed</h3>
    <ul>
      <li>A paralyzed creature is incapacitated and can't move or speak.</li>
      <li>A paralyzed creature automatically fails Strength and Dexterity saving throws. </li>
      <li>Attack rolls against a paralyzed creature have advantage.</li>
      <li>Any attack that hits a paralyzed creature is a critical hit if the attacker is within 5 feet.</li>
    </ul>
    <h3>Petrified</h3>
    <ul>
      <li>A petrified creature (and all of its mundane possessions) is transformed into a solid inanimate substance
        (usually stone). </li>
      <li>A petrified creature's weight is increased by a factor of ten and it ceases aging.</li>
      <li>A petrified creature is incapacitated, can't move or speak, and is unaware of its surroundings.</li>
      <li>A petrified creature automatically fails Strength and Dexterity saving throws.</li>
      <li>A petrified creature has resistance to all damage.</li>
      <li>A petrified creature is immune to poison and disease (time spent petrified does not affect the duration of a
        poison or disease already in its system).</li>
    </ul>
    <h3>Poisoned</h3>
    <ul>
      <li>A poisoned creature has disadvantage on attack rolls and ability checks.</li>
    </ul>
    <h3>Prone</h3>
    <ul>
      <li>A prone creature's only movement option is to crawl (every 1 foot of movement while crawling costs 1 extra
        foot) until it stands up.</li>
      <li>Standing up requires half a creature's movement.</li>
      <li>A prone creature makes melee attack rolls with disadvantage.</li>
      <li>An attack roll against a prone creature is made with advantage if the attacker is within 5 feet. Otherwise,
        the attack roll is made with disadvantage.</li>
    </ul>
    <h3>Rattled</h3>
    <ul>
      <li>A rattled creature cannot take reactions.</li>
      <li>A creature that is immune to being stunned is immune to being rattled.</li>
    </ul>
    <h3>Restrained</h3>
    <ul>
      <li>A restrained creature's Speed becomes 0, and it can't benefit from bonuses to speed.</li>
      <li>Attack rolls against a restrained creature are made with advantage.</li>
      <li>A restrained creature makes attack rolls with disadvantage.</li>
      <li>The restrained creature has disadvantage on Dexterity saving throws.</li>
    </ul>
    <h3>Slowed</h3>
    <ul>
      <li>A slowed creature's Speed is halved.</li>
      <li>A slowed creature takes a −2 penalty to AC and Dexterity saving throws.</li>
      <li>A slowed creature cannot take reactions.</li>
      <li>On its turn, a slowed creature can take either an action or a bonus action, not both. In addition, it can't
        make more than one melee or ranged attack during its turn.</li>
    </ul>
    <h3>Stunned</h3>
    <ul>
      <li>A stunned creature is incapacitated (see the condition), can't move, and can speak only falteringly.</li>
      <li>The creature automatically fails Strength and Dexterity saving throws.</li>
      <li>Attack rolls against the creature have advantage.</li>
    </ul>
    <h3>Unconscious</h3>
    <ul>
      <li>An unconscious creature is incapacitated, can't move or speak, and is unaware of its surroundings.</li>
      <li>An unconscious creature drops whatever it's holding and falls prone.</li>
      <li>An unconscious creature automatically fails Strength and Dexterity saving throws.</li>
      <li>Attack rolls against an unconscious creature are made with advantage.</li>
      <li>Any attack that hits an unconscious creature is a critical hit if the attacker is within 5 feet.</li>
    </ul>
    <h3>Tracked Conditions</h3>
    <p>Various challenges, obstacles, and magics can lead to either fatigue or strife. An effect can give a creature one
      or more levels of fatigue or strife (detailed in the effect's description).</p>
    <p>If a creature suffering from fatigue or strife fails to resist another effect that causes a level of the tracked
      condition, its current level increases by the amount specified in the effect's description.</p>
    <p>A creature suffers the effect of its current level in a tracked condition as well as all lower levels. For
      example, a creature suffering level 3 fatigue has its Speed halved, it cannot Sprint, and it makes Strength,
      Dexterity, and Constitution checks with disadvantage.</p>
    <p>An effect that removes a tracked condition reduces its level as specified in the effect's description, with all
      tracked condition effects ending when a creature's condition level is reduced below 1.</p>
    <p>Finishing a long rest reduces a creature's fatigue and strife levels by 1.</p>

    <h3>Fatigue</h3>
    <p>Fatigue represents exhaustion, exposure, hunger, injuries, and other physical factors which gradually wear a
      creature down. A creature which reaches the 7th level of the fatigue track becomes doomed and dies.</p>
    <p><strong>Fatigue Level Effects</strong></p>
    <ol>
      <li>Cannot dash.</li>
      <li>Disadvantage on Strength, Dexterity, and Constitution checks.</li>
      <li>Speed halved.</li>
      <li>Disadvantage on attack rolls and saving throws using Strength, Dexterity, or Constitution.</li>
      <li>Hit Dice halved.</li>
      <li>Speed reduced to 5 ft.</li>
      <li>Doomed.</li>
    </ol>
    <h3>Strife</h3>
    <p>Strife represents corruption, despair, fear, loss of resolve, and other mental factors which gradually undo a
      creature's very soul. A creature which reaches the 7th level of the strife track suffers a special, permanent
      effect, which is either randomly selected or decided by the GM. This might involve the creature shutting down
      completely, or being impacted in such a way that it is forever changed.</p>
    <p><strong>Strife Level Effects</strong></p>
    <ol>
      <li>Disadvantage on Intelligence, Wisdom, and Charisma checks.</li>
      <li>Disadvantage on concentration checks.</li>
      <li>Can only take a bonus action or action each turn (not both).</li>
      <li>Disadvantage on attack rolls and saving throws using Intelligence, Wisdom, and Charisma.</li>
      <li>Suffer the effects of a randomly determined short-term mental stress effect.</li>
      <li>Cannot cast spells (but can cast cantrips).</li>
      <li>Suffer the effects of a randomly determined long-term mental stress effect.</li>
    </ol>

    <p class="license">This work includes material taken from the <a
        href="https://slyflourish.com/lazy_5e_monster_building_resource_document.html">Lazy GM's 5e Monster Builder
        Resource Document</a> written by Teos Abadía of <a href="https://alphastream.org">Alphastream.org</a>, Scott
      Fitzgerald Gray of <a href="https://insaneangel.com">Insaneangel.com</a>, and Michael E. Shea of <a
        href="https://slyflourish.com">SlyFlourish.com</a>, available under a <a rel="license"
        href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
    </p>

    <p class="license">This work includes material taken from the <a href="https://a5esrd.com/a5esrd">A5E System
        Reference Document (A5ESRD)</a> by EN Publishing and available at A5ESRD.com, based on Level Up: Advanced 5th
      Edition, available at www.levelup5e.com. The A5ESRD is licensed under the Creative Commons Attribution 4.0
      International License available at <a
        href="https://creativecommons.org/licenses/by/4.0/legalcode">https://creativecommons.org/licenses/by/4.0/legalcode</a>.
    </p>

    <p class="license">This work includes material taken from the System Reference Document 5.1 ("SRD 5.1") by Wizards
      of the Coast LLC and available at <a
        href="https://dnd.wizards.com/resources/systems-reference-document">https://dnd.wizards.com/resources/systems-reference-document</a>.
      The SRD 5.1 is licensed under the Creative Commons Attribution 4.0 International License available at <a
        href="https://creativecommons.org/licenses/by/4.0/legalcode">https://creativecommons.org/licenses/by/4.0/legalcode</a>.
    </p>

  </div>

  <script>
    // CR Data
    const CRdata = {
      "CR 0": { "AC/DC": 10, "HPAVG": "3 (2-4)", "HP": 3, "AtkBonus": 2, "Prof": 2, "Damage Per Round": "2", "# Atks": "1", "Dmg": "2 (1d4)", "Example Monsters": "Commoner, rat, spider" },
      "CR 1/8": { "AC/DC": 11, "HPAVG": "9 (7-11)", "HP": 9, "AtkBonus": 3, "Prof": 2, "Damage Per Round": "3", "# Atks": "1", "Dmg": "4 (1d6 + 1)", "Example Monsters": "Bandit, cultist, giant rat" },
      "CR 1/4": { "AC/DC": 11, "HPAVG": "13 (10-16)", "HP": 13, "AtkBonus": 3, "Prof": 2, "Damage Per Round": "5", "# Atks": "1", "Dmg": "5 (1d6 + 2)", "Example Monsters": "Acolyte, skeleton, wolf" },
      "CR 1/2": { "AC/DC": 12, "HPAVG": "22 (17-28)", "HP": 22, "AtkBonus": 4, "Prof": 2, "Damage Per Round": "8", "# Atks": "2", "Dmg": "4 (1d4 + 2)", "Example Monsters": "Black bear, scout, shadow" },
      "CR 1": { "AC/DC": 12, "HPAVG": "33 (25-41)", "HP": 33, "AtkBonus": 5, "Prof": 2, "Damage Per Round": "12", "# Atks": "2", "Dmg": "6 (1d8 + 2)", "Example Monsters": "Dire wolf, specter, spy" },
      "CR 2": { "AC/DC": 13, "HPAVG": "45 (34-56)", "HP": 45, "AtkBonus": 5, "Prof": 2, "Damage Per Round": "17", "# Atks": "2", "Dmg": "9 (2d6 + 2)", "Example Monsters": "Ghast, ogre, priest" },
      "CR 3": { "AC/DC": 13, "HPAVG": "65 (49-81)", "HP": 65, "AtkBonus": 5, "Prof": 2, "Damage Per Round": "23", "# Atks": "2", "Dmg": "12 (2d8 + 3)", "Example Monsters": "Knight, mummy, werewolf" },
      "CR 4": { "AC/DC": 14, "HPAVG": "84 (64-106)", "HP": 84, "AtkBonus": 6, "Prof": 2, "Damage Per Round": "28", "# Atks": "2", "Dmg": "14 (3d8 + 1)", "Example Monsters": "Ettin, ghost" },
      "CR 5": { "AC/DC": 15, "HPAVG": "95 (71-119)", "HP": 95, "AtkBonus": 7, "Prof": 3, "Damage Per Round": "35", "# Atks": "3", "Dmg": "12 (3d6 + 2)", "Example Monsters": "Elemental, gladiator, vampire spawn" },
      "CR 6": { "AC/DC": 15, "HPAVG": "112 (84-140)", "HP": 112, "AtkBonus": 7, "Prof": 3, "Damage Per Round": "41", "# Atks": "3", "Dmg": "14 (3d6 + 4)", "Example Monsters": "Mage, medusa, wyvern" },
      "CR 7": { "AC/DC": 15, "HPAVG": "130 (98-162)", "HP": 130, "AtkBonus": 7, "Prof": 3, "Damage Per Round": "47", "# Atks": "3", "Dmg": "16 (3d8 + 3)", "Example Monsters": "Stone giant, young black dragon" },
      "CR 8": { "AC/DC": 15, "HPAVG": "136 (102-170)", "HP": 136, "AtkBonus": 7, "Prof": 3, "Damage Per Round": "53", "# Atks": "3", "Dmg": "18 (3d10 + 2)", "Example Monsters": "Assassin, frost giant" },
      "CR 9": { "AC/DC": 16, "HPAVG": "145 (109-181)", "HP": 145, "AtkBonus": 8, "Prof": 4, "Damage Per Round": "59", "# Atks": "3", "Dmg": "22 (3d12 + 3)", "Example Monsters": "Bone devil, fire giant, young blue dragon" },
      "CR 10": { "AC/DC": 17, "HPAVG": "155 (116-194)", "HP": 155, "AtkBonus": 9, "Prof": 4, "Damage Per Round": "65", "# Atks": "4", "Dmg": "16 (3d8 + 3)", "Example Monsters": "Stone golem, young red dragon" },
      "CR 11": { "AC/DC": 17, "HPAVG": "165 (124-206)", "HP": 165, "AtkBonus": 9, "Prof": 4, "Damage Per Round": "71", "# Atks": "4", "Dmg": "18 (3d10 + 2)", "Example Monsters": "Djinni, efreeti, horned devil" },
      "CR 12": { "AC/DC": 17, "HPAVG": "175 (131-219)", "HP": 175, "AtkBonus": 9, "Prof": 4, "Damage Per Round": "77", "# Atks": "4", "Dmg": "19 (3d10 + 3)", "Example Monsters": "Archmage, erinyes" },
      "CR 13": { "AC/DC": 18, "HPAVG": "184 (138-230)", "HP": 184, "AtkBonus": 10, "Prof": 5, "Damage Per Round": "83", "# Atks": "4", "Dmg": "21 (4d8 + 3)", "Example Monsters": "Adult white dragon, storm giant, vampire" },
      "CR 14": { "AC/DC": 19, "HPAVG": "196 (147-245)", "HP": 196, "AtkBonus": 11, "Prof": 5, "Damage Per Round": "89", "# Atks": "4", "Dmg": "22 (4d10)", "Example Monsters": "Adult black dragon, ice devil" },
      "CR 15": { "AC/DC": 19, "HPAVG": "210 (158-263)", "HP": 210, "AtkBonus": 11, "Prof": 5, "Damage Per Round": "95", "# Atks": "5", "Dmg": "19 (3d10 + 3)", "Example Monsters": "Adult green dragon, mummy lord, purple worm" },
      "CR 16": { "AC/DC": 19, "HPAVG": "229 (172-286)", "HP": 229, "AtkBonus": 11, "Prof": 5, "Damage Per Round": "101", "# Atks": "5", "Dmg": "21 (4d8 + 3)", "Example Monsters": "Adult blue dragon, iron golem, marilith" },
      "CR 17": { "AC/DC": 20, "HPAVG": "246 (185-308)", "HP": 246, "AtkBonus": 12, "Prof": 6, "Damage Per Round": "107", "# Atks": "5", "Dmg": "22 (3d12 + 3)", "Example Monsters": "Adult red dragon" },
      "CR 18": { "AC/DC": 21, "HPAVG": "266 (200-333)", "HP": 266, "AtkBonus": 13, "Prof": 6, "Damage Per Round": "113", "# Atks": "5", "Dmg": "23 (4d10 + 1)", "Example Monsters": "Demilich" },
      "CR 19": { "AC/DC": 21, "HPAVG": "285 (214-356)", "HP": 214, "AtkBonus": 13, "Prof": 6, "Damage Per Round": "119", "# Atks": "5", "Dmg": "24 (4d10 + 2)", "Example Monsters": "Balor" },
      "CR 20": { "AC/DC": 21, "HPAVG": "300 (225-375)", "HP": 300, "AtkBonus": 13, "Prof": 6, "Damage Per Round": "132", "# Atks": "5", "Dmg": "26 (4d12)", "Example Monsters": "Ancient white dragon, pit fiend" },
      "CR 21": { "AC/DC": 22, "HPAVG": "325 (244-406)", "HP": 244, "AtkBonus": 14, "Prof": 7, "Damage Per Round": "150", "# Atks": "5", "Dmg": "30 (4d12 + 4)", "Example Monsters": "Ancient black dragon, lich, solar" },
      "CR 22": { "AC/DC": 23, "HPAVG": "350 (263-438)", "HP": 350, "AtkBonus": 15, "Prof": 7, "Damage Per Round": "168", "# Atks": "5", "Dmg": "34 (4d12 + 8)", "Example Monsters": "Ancient green dragon" },
      "CR 23": { "AC/DC": 23, "HPAVG": "375 (281-469)", "HP": 375, "AtkBonus": 15, "Prof": 7, "Damage Per Round": "186", "# Atks": "5", "Dmg": "37 (6d10 + 4)", "Example Monsters": "Ancient blue dragon, kraken" },
      "CR 24": { "AC/DC": 23, "HPAVG": "400 (300-500)", "HP": 400, "AtkBonus": 15, "Prof": 7, "Damage Per Round": "204", "# Atks": "5", "Dmg": "41 (6d10 + 8)", "Example Monsters": "Ancient red dragon" },
      "CR 25": { "AC/DC": 24, "HPAVG": "430 (323-538)", "HP": 430, "AtkBonus": 16, "Prof": 8, "Damage Per Round": "222", "# Atks": "5", "Dmg": "44 (6d10 + 11)", "Example Monsters": "Demon princes, archdevils" },
      "CR 26": { "AC/DC": 25, "HPAVG": "460 (345-575)", "HP": 460, "AtkBonus": 17, "Prof": 8, "Damage Per Round": "240", "# Atks": "5", "Dmg": "48 (6d10 + 15)", "Example Monsters": "Demon princes, archdevils" },
      "CR 27": { "AC/DC": 25, "HPAVG": "490 (368-613)", "HP": 490, "AtkBonus": 17, "Prof": 8, "Damage Per Round": "258", "# Atks": "5", "Dmg": "52 (6d10 + 19)", "Example Monsters": "Demon princes, archdevils" },
      "CR 28": { "AC/DC": 25, "HPAVG": "540 (405-675)", "HP": 540, "AtkBonus": 17, "Prof": 8, "Damage Per Round": "276", "# Atks": "5", "Dmg": "55 (6d10 + 22)", "Example Monsters": "Demon princes, archdevils" },
      "CR 29": { "AC/DC": 26, "HPAVG": "600 (450-750)", "HP": 600, "AtkBonus": 18, "Prof": 9, "Damage Per Round": "294", "# Atks": "5", "Dmg": "59 (6d10 + 26)", "Example Monsters": "Demon princes, archdevils" },
      "CR 30": { "AC/DC": 27, "HPAVG": "666 (500-833)", "HP": 666, "AtkBonus": 19, "Prof": 9, "Damage Per Round": "312", "# Atks": "5", "Dmg": "62 (6d10 + 29)", "Example Monsters": "Demigods, tarrasque" },
    };

    // Base Stat block
    const statBlock = {
      name: '',
      CR: 0,
      HP: 0,
      AC: 0,
      DC: 0,
      speed: 30,
      prof: 2,
      bonus: 2,
      stats: { str: 10, dex: 10, con: 10, int: 10, wis: 10, cha: 10 },
      actions: [],
      abilities: [],
    };

    // for reference when editing monTypeStats
    const fullStatBlock = {
      name: '',
      CR: 0,
      HP: 0,
      AC: 0,
      DC: 0,
      speed: 30,
      prof: 2,
      bonus: 2,
      stats: { str: 10, dex: 10, con: 10, int: 10, wis: 10, cha: 10 },
      actions: [],
      abilities: [],
      type: '',
      role: '',
      senses: '',
      skills: '',
      languages: '',
      resistances: 'fire',
      immunities: 'fire, Prone, Restrained',
    };

    // 5e SRD Skills list (for reference)
    const skillsList = ['Athletics', 'Acrobatics', 'Sleight of Hand', 'Stealth', 'Arcana', 'History', 'Investigation', 'Nature', 'Religion', 'Animal Handling', 'Insight', 'Medicine', 'Perception', 'Survival', 'Deception', 'Intimidation', 'Performance', 'Persuasion']


    // 5e SRD Monster Type List
    const monTypeList = ['Aberration', 'Beast', 'Celestial', 'Construct', 'Dragon', 'Elemental', 'Fey', 'Fiend', 'Giant', 'Humanoid', 'Monstrosity', 'Ooze', 'Plant', 'Undead'];
    // Lazy GM's 5e Monster Builder Resource Document Monster Roles List
    const monRoleList = ['Ambusher', 'Artillery', 'Bruiser', 'Controller', 'Defender', 'Leader', 'Skirmisher'];
    // Monster Themes List
    const monThemeList = ['Abberant', 'Bestial', 'Common', 'Charm', 'Construct', 'Draconic', 'Elemental', 'Leadership', 'Magic', 'Necromantic', 'Plant', 'Poison', 'Rogue', 'Solo', 'Warrior'];

    /**
     * Monster Powers
     * 
     * name - Name of Power to display
     * description - Description of Power to display
     * tags - Type, Role, or Theme to tag the power with. 
     * You may add as many tags as you want from the lists above to any power,
     * Consider adding the additional powers listed in Forge of Foes
     */
    const powers = [
      // { tags: ['Tag', 'Another tag'], name: 'Name.', description: "Description", }, // I'm a power! You can copy paste me at the end to add your own just remove the '//' from the start to uncomment
      // Common powers that I have added tags to based on the role descriptions
      { tags: ['Common', "Artillery"], name: 'Damaging Blast.', description: 'This creature has one or more single-target ranged attacks using the attack bonus and damage calculated above, and which deal damage of an appropriate type.', },
      { tags: ['Common'], name: 'Damage Reflection.', description: "Whenever a creature within 5 feet of this creature hits them with a melee attack, the attacker takes damage in return of a type appropriate to the creature. The damage dealt is equal to half the damage of one of this creature's attacks. If you give a creature this feature, give them one less attack than normal.", },
      { tags: ['Common', "Skirmisher"], name: 'Misty Step.', description: "As a bonus action, this creature can teleport up to 30 feet to an unoccupied space they can see.", },
      { tags: ['Common'], name: 'Knockdown.', description: "When this creature hits a target with a melee attack, the target must succeed on a Strength saving throw or be knocked prone.", },
      { tags: ['Common', "Controller"], name: 'Restraining Grab.', description: "When this creature hits a target with a melee attack, the target is grappled (escape DC based on this creature's Strength or Dexterity modifier). While grappled, the target is restrained.", },
      { tags: ['Common'], name: 'Damaging Burst.', description: "As an action, this creature can create a burst of energy, magic, spines, or some other effect in a 10-foot-radius sphere, either around themself or at a point within 120 feet. Each creature in that area must make a Dexterity, Constitution, or Wisdom saving throw (your choice, based on the type of burst). On a failure, a target takes damage of an appropriate type equal to half this creature's total damage per round. On a success, a target takes half as much damage.", },
      { tags: ['Common', "Ambusher"], name: 'Cunning Action.', description: "On each of their turns, this creature can use a bonus action to take the Dash, Disengage, or Hide action.", },
      { tags: ['Common'], name: 'Damaging Aura.', description: "Each creature who starts their turn within 10 feet of this creature takes damage of a type appropriate to the creature. The damage dealt is equal to half the damage of one of this creature's attacks. If you give a creature this feature, give them one less attack than normal.", },
      { tags: ['Common', "Bruiser"], name: 'Energy Weapons', description: "The creature's weapon attacks deal extra damage of an appropriate type. You can add this damage on top of the creature's regular damage output to give them a combat boost, or you can replace some of the creature's normal weapon damage with this energy damage.", },
      { tags: ['Common'], name: 'Damage Transference.', description: "When this creature takes damage, they can transfer half or all of that damage (your choice) to a willing creature within 30 or 60 feet of them. This feature is particularly good for boss monsters.", },
      // Below are from the 5e SRD
      { tags: ['Common', "Leader"], name: 'Leadership.', description: "As a reaction the creature can utter a special command or warning whenever a nonhostile creature that it can see within 30 feet of it makes an attack roll or a saving throw. The creature can add a d4 to its roll.", },
      { tags: ['Common', "Defender"], name: 'Protection.', description: "When an ally within 5 feet of the creature is the target of an attack, the creature can use it's reaction to impose disadvantage on the attack roll.", },
    ];

    /**
     * Monster Type Stats
     * (if you add a new role here make sure to add it to the monTypeList above)
     * Baseline stats and abilties for various monster types based on my own calculations from the 5e SRD
     * These OVERRIDE any stats in the baseline statBlock
     * If the stat doesnt exist it will ADD that stat
     * Consider adding the common resistances/immunities or senses listed in Forge of Foes for each monster type
     */
    function getmonTypeStats() {
      return {
        // 'Example': {
        //   stats: { str: 10, dex: 10, con: 12, int: 10, wis: 10, cha: 10 }, // these are the baseline things will get added/subtracted after
        //   skills: 'Athletics',
        //   speed: 40, // must stay a number if you want the Role modification to work
        //   languages: 'Common, Giant',
        //   resistances: 'fire',
        //   immunities: 'fire, Prone, Restrained',
        //   // etc. you can really add whatever you want recommended it be a number or string
        //   // randomizer works like this: getRandomDifferent(['Option 1', 'Option 2'])
        // },
        'Aberration': {
          stats: { str: 10, dex: 10, con: 12, int: 10, wis: 10, cha: 10 },
        },
        'Beast': {
          skills: 'Athletics',
          speed: 40,
          stats: { str: 10, dex: 12, con: 12, int: 7, wis: 10, cha: 8 },
        },
        'Celestial': {
          stats: { str: 10, dex: 10, con: 10, int: 10, wis: 12, cha: 12 },
        },
        'Construct': {
          stats: { str: 10, dex: 10, con: 15, int: 10, wis: 10, cha: 10 },
        },
        'Dragon': {
          speed: 40,
          stats: { str: 10, dex: 10, con: 10, int: 10, wis: 10, cha: 12 },
        },
        'Elemental': {
        },
        'Fey': {
          stats: { str: 10, dex: 10, con: 10, int: 10, wis: 10, cha: 14 },
        },
        'Fiend': {
          resistances: 'fire',
          languages: getRandomDifferent(['Abyssal', 'Infernal']),
          stats: { str: 10, dex: 10, con: 10, int: 10, wis: 10, cha: 12 },
        },
        'Giant': {
          languages: 'Common, Giant',
          stats: { str: 14, dex: 10, con: 12, int: 10, wis: 10, cha: 10 },
        },
        'Humanoid': {
          skills: getRandomDifferent(skillsList), // random skill
          stats: { str: 11, dex: 11, con: 11, int: 11, wis: 11, cha: 11 },
        },
        'Monstrosity': {
          skills: 'Perception, Stealth',
          stats: { str: 10, dex: 10, con: 12, int: 10, wis: 10, cha: 8 },
        },
        'Ooze': {
          senses: 'blindsight 60 ft. (blind beyond this radius)',
          speed: 20,
          stats: { str: 10, dex: 10, con: 10, int: 1, wis: 6, cha: 2 },
        },
        'Plant': {
          stats: { str: 10, dex: 10, con: 10, int: 1, wis: 7, cha: 1 },
        },
        'Undead': {
          stats: { str: 10, dex: 10, con: 12, int: 10, wis: 10, cha: 10 },
        }
      };
    }

    /** 
     * Role Modifications (if you add a new role here make sure to add it to the monRoleList above)
     * https://slyflourish.com/lazy_5e_monster_building_resource_document.html#monsterroles
     * These are my own calculations based on the 5e_monster_building_resource_document, Consider using the more detailed guidance from Forge of Foes to update the calculations
     * Options:
     * main - Main stat for attack purposes: str, dex, con, int, wis, or cha 
     *        You can have multiple options here comma separated like this main: ['dex', 'cha'] it will choose randomly
     * HP - HP multiplier allows for reducing or increasing HP by a percent i.e .8 reduces by 20%
     * Atk - Attack bonus, additive i.e '-2' will reduce the attack bonus by 2
     * AC - AC bonus, additive i.e '-2' will reduce the AC by 2
     * dmg - Damage bonus, additive i.e '-2' will reduce the AC by 2, "CR" will add the CR to attack damage
     * speed - Speed bonus, additive i.e '20' will increase speed by 20
     * skills - Additional skill proficiencies
     */
    const monRoleMods = {
      // The example lowers HP by 10%, lowers AC by 2, increases attack bonus by 2, adds "+ Bonus" to damage string, adds stealth to skills, and adds 20 to the base speed
      // 'Example': { main: ['dex'], HP: .9, AC: -2, Atk: 2, dmg: 'Bonus', skills: 'Stealth', speed: 20 },
      'Ambusher': { main: ['dex'], HP: .9, skills: 'Stealth' }, // can hide, typically have lower health
      'Artillery': { main: ['dex'], AC: -1, Atk: 3 }, // lower AC, high attack bonus
      'Bruiser': { main: ['str'], AC: -1, dmg: 'Prof Bonus' }, // higher than average damage, lower AC
      'Controller': { main: ['str'] }, // some can grapple or swallow opponents
      'Defender': { main: ['str'], AC: 2, Atk: -1, save: 1 }, // less accurate with attacks, higher AC
      'Leader': { main: ['cha'], HP: .9 }, // lower than average HP
      'Skirmisher': { main: ['dex'], HP: .9, speed: 10 }, // high mobility, lower HP
    };

    /**
     * Modify stats based on CR
     * This allows for the stats to feel somewhat natural
     * these are used to generate a random number to add/subtract to each stat
     * Based on my own calculations 
     */
    const monCRScoreMods = {
      '0': { min: -4, max: 1 }, // >=CR0
      '1': { min: -2, max: 2 }, // >=CR1
      '5': { min: -1, max: 5 }, // >=CR5
      '10': { min: 0, max: 5 }, // >=CR10
      '15': { min: 0, max: 8 }, // >=CR15
      '20': { min: 0, max: 12 }, // >=CR20
    };

    const nameInput = document.getElementById('name');
    // Populate CR options
    const crSelect = document.getElementById('crSelect');
    for (const cr in CRdata) {
      const option = document.createElement("option");
      option.value = cr;
      option.text = cr;
      crSelect.appendChild(option);
    }
    // Populate Type options
    const typeSelect = document.getElementById('typeSelect');
    for (const element of monTypeList) {
      const option = document.createElement("option");
      option.value = element;
      option.text = element;
      typeSelect.appendChild(option);
    }
    // Populate Role options
    const roleSelect = document.getElementById('roleSelect');
    for (const element of monRoleList) {
      const option = document.createElement("option");
      option.value = element;
      option.text = element;
      roleSelect.appendChild(option);
    }
    // Populate Theme options
    const themeSelect = document.getElementById('themeSelect');
    for (const element of monThemeList) {
      const option = document.createElement("option");
      option.value = element;
      option.text = element;
      themeSelect.appendChild(option);
    }

    function getCRFromURL() {
      const params = new URLSearchParams(window.location.search);
      let cr = params.get('cr');
      if (!cr) return "CR 0"; // Default value
      return `CR ${cr}`;
    }

    function setCRToURL(cr) {
      const url = new URL(window.location);
      url.searchParams.set('cr', cr.split(" ")[1]); // Get just the number part
      history.pushState({}, '', url);
    }

    /**
     * Stat Display
     */
    function showStats() {
      const crsel = crSelect.value;
      const cr = crSelect.value.replace("CR ", "");
      const type = typeSelect.value;
      const role = roleSelect.value;
      const theme = themeSelect.value;
      let monName = nameInput.value;

      const stats = generateMonster(cr, type, role, theme, monName);

      let output = `<div id='crTitle'>${crsel}</div>`;
      for (const key in stats) {
        if (key === 'stats') {
          output += `<table>
                        <thead>
                          <th>Str</th>
                          <th>Dex</th>
                          <th>Con</th>
                          <th>Int</th>
                          <th>Wis</th>
                          <th>Cha</th>
                        </thead>
                        <tbody>
                          <tr>
                            <td>${stats[key].str}</td>
                            <td>${stats[key].dex}</td>
                            <td>${stats[key].con}</td>
                            <td>${stats[key].int}</td>
                            <td>${stats[key].wis}</td>
                            <td>${stats[key].cha}</td>
                          </tr>
                          <tr>
                            <td>${Math.floor((stats[key].str - 10) / 2)}</td>
                            <td>${Math.floor((stats[key].dex - 10) / 2)}</td>
                            <td>${Math.floor((stats[key].con - 10) / 2)}</td>
                            <td>${Math.floor((stats[key].int - 10) / 2)}</td>
                            <td>${Math.floor((stats[key].wis - 10) / 2)}</td>
                            <td>${Math.floor((stats[key].cha - 10) / 2)}</td>
                          </tr>
                        </tbody>
                      </table>`;
        } else if (key === 'actions') {

          output += `<strong>Actions:</strong><br>`;
          stats[key].forEach(element => {
            output += `${element}<br>`;
          });

        } else if (key === 'abilities') {
          output += `<strong>Abilities:</strong><br>`;
          stats[key].forEach(element => {
            output += `<strong>${element.name}</strong> ${element.description}<br>`;
          });
        } else if (key === 'type' || key === 'role') {
          // do nothing
        } else {
          output += `<strong>${key}:</strong> ${stats[key]}<br>`;
        }
      }

      // Add single line stat block

      const singlestats = CRdata[crsel];
      let singleLineStatBlock = `${cr} | AC/DC ${stats["AC"]} | HP ${stats["HP"]} | Atk/Prof ${singlestats["AtkBonus"]} | DPR ${singlestats["Damage Per Round"]} | # Atks ${singlestats["# Atks"]} | Dmg ${singlestats["Dmg"]}`;
      output += `<div><strong>One Line Stat Block:</strong> ${singleLineStatBlock}</div>`;

      document.getElementById('statBlock').innerHTML = output;
    }

    /**
     * Return a random element from an array that is
     * different than `last` (as long as the array has > 1 items). 
     * Return null if the array is empty.
     */
    function getRandomDifferent(arr, last = undefined) {
      if (arr.length === 0) {
        return null;
      } else if (arr.length === 1) {
        return arr[0];
      } else {
        let num = 0;
        do {
          num = Math.floor(Math.random() * arr.length);
        } while (arr[num] === last);
        return arr[num];
      }
    }

    /**
     * Returns a random integer between min (inclusive) and max (inclusive).
     * The value is no lower than min (or the next integer greater than min
     * if min isn't an integer) and no greater than max (or the next integer
     * lower than max if max isn't an integer).
     * Using Math.round() will give you a non-uniform distribution!
     */
    function getRandomInt(min, max) {
      min = Math.ceil(min);
      max = Math.floor(max);
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    /**
     * Return a random stat block that matches the chosen CR, type, role, and theme
     */
    function generateMonster(CR, type, role, theme, name) {
      let generatedStats = {};

      generatedStats = JSON.parse(JSON.stringify(statBlock)); //deep copy

      // We copy the base CR stats because we will be making edits
      let statCR = JSON.parse(JSON.stringify(CRdata["CR 1"])); // Default CR 1
      if (CRdata['CR ' + CR]) {
        statCR = JSON.parse(JSON.stringify(CRdata['CR ' + CR])); // deep copy -_-
      }

      // Assign stats based on CR
      generatedStats.name = name;
      generatedStats.AC = statCR["AC/DC"];
      generatedStats.CR = CR;
      generatedStats.DC = statCR["AC/DC"];
      generatedStats.HP = statCR.HP;
      generatedStats.prof = statCR.Prof;
      generatedStats.bonus = statCR["AtkBonus"];

      if (type) {
        // assign the base stats matching the type
        const typeStats = getmonTypeStats();
        const typeStatMods = JSON.parse(JSON.stringify(typeStats[type])); //deep copy because javascript sucks
        Object.assign(generatedStats, typeStatMods);
        generatedStats.type = type;
      }

      // Randomize ability scores (do this before we set the main stat as that may affect the results)
      let crScoreMods;
      if (CR >= 20) {
        crScoreMods = monCRScoreMods[20];
      } else if (CR >= 15) {
        crScoreMods = monCRScoreMods[15];
      } else if (CR >= 10) {
        crScoreMods = monCRScoreMods[10];
      } else if (CR >= 5) {
        crScoreMods = monCRScoreMods[5];
      } else if (eval(CR) < 1) {
        crScoreMods = monCRScoreMods[0];
      } else {
        crScoreMods = monCRScoreMods[1];
      }

      for (const key in generatedStats.stats) {
        if (Object.prototype.hasOwnProperty.call(generatedStats.stats, key)) {
          generatedStats.stats[key] += getRandomInt(crScoreMods.min, crScoreMods.max);
          // stats can't be less than 1
          if (generatedStats.stats[key] < 1) { generatedStats.stats[key] = 1 }
        }
      }

      if (role) {
        generatedStats.role = role;

        // make Role mods
        if (monRoleMods[role].HP) {
          generatedStats.HP = Math.round(generatedStats.HP * monRoleMods[role].HP);
        }
        if (monRoleMods[role].AC) {
          generatedStats.AC += monRoleMods[role].AC;
        }
        if (monRoleMods[role].Atk) {
          generatedStats.bonus += monRoleMods[role].Atk;
        }
        if (monRoleMods[role].speed) {
          generatedStats.speed += monRoleMods[role].speed;
        }
        if (monRoleMods[role].dmg) {
          statCR.Dmg += '+ ' + monRoleMods[role].dmg;
        }
        if (monRoleMods[role].skills) {
          if (generatedStats.skills === undefined) {
            generatedStats.skills = '';
          }
          generatedStats.skills += ' ' + monRoleMods[role].skills;
        }

        // get a main stat that matches the bonus
        const mainStat = getRandomDifferent(monRoleMods[role].main);
        generatedStats.stats[mainStat] = 10 + (2 * (generatedStats.bonus - statCR.Prof));
      }

      // Add main attack to actions (multiattack if applicable)
      if (statCR["# Atks"] > 1) {
        const matkString = "Multiattack. The monster makes " + statCR["# Atks"] + " attacks.";
        generatedStats.actions.push(matkString);
      }
      const atkString = "Attack. Melee or Ranged Weapon Attack: " + generatedStats.bonus + " to hit, reach 5 ft. or range 60 ft., one target. Hit: " + statCR.Dmg + " damage.";
      generatedStats.actions.push(atkString);


      // Get powers that match the tags
      const filteredData = powers.filter(item => item.tags.includes(type) || item.tags.includes(role) || item.tags.includes(theme));

      // Choose a random power
      const randomAbility = getRandomDifferent(filteredData);
      generatedStats.abilities.push(randomAbility);

      // if the CR is greater than 9 choose 2 powers
      if (CR > 9) {
        const randomAbility2 = getRandomDifferent(filteredData, randomAbility); // r2 is different than r1.        
        generatedStats.abilities.push(randomAbility2);
      }

      console.log(generatedStats);
      return generatedStats;
    }


    const submit = document.getElementById('submit');
    submit.addEventListener('click', function () {
      showStats();
      setCRToURL(crSelect.value);
    });

    // Set initial value from URL and show stats
    crSelect.value = getCRFromURL();

  </script>


</body>

</html>